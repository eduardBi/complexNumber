<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="./Complex.js/complex.js"></script>
    <script>
        
        let dataInput={
            firstBranch:{
                coil:25,
                condens:125,
                resistance:15,
                isStraight:true
            },
            secondBranch:{
                coil:80,
                resistance:12,
                isStraight:false
            },
            thirdbranch:{
                resistance:8,
                isStraight:false 
            }
        }
        let frequency=50
        let psy=180/4
        let startVoltage=50*Math.sqrt(2)

            function reactiveResist (dataInput){
                let reactiveResictance=[]
                let arrayOfKeys=Object.keys(dataInput);

                for(let i=0;i<arrayOfKeys.length;i++){

                    
                    
                    if(dataInput[arrayOfKeys[i]].coil && dataInput[arrayOfKeys[i]].condens){
                              reactiveResictance.push({...dataInput[arrayOfKeys[i]],
                                reactiveResistenceOfCoil:2*Math.PI*frequency*dataInput[arrayOfKeys[i]].coil*10**-3,
                                reactiveResistenceOfCondense:1/(Math.PI*frequency*2*dataInput[arrayOfKeys[i]].condens*10**-6*-1),
                            })
                              
                        
                        }else   if(dataInput[arrayOfKeys[i]].coil && !dataInput[arrayOfKeys[i]].condens)
                        {
                            
                            reactiveResictance.push({...dataInput[arrayOfKeys[i]],
                                reactiveResistenceOfCoil:2*Math.PI*frequency*dataInput[arrayOfKeys[i]].coil*10**-3,
                                
                            })
                    
                        
                }else   if(!dataInput[arrayOfKeys[i]].coil && dataInput[arrayOfKeys[i]].condens){
                            
                            
                    reactiveResictance.push({...dataInput[arrayOfKeys[i]],
                                reactiveResistenceOfCondense:1/(Math.PI*frequency*2*dataInput[arrayOfKeys[i]].condens*10**-6*-1),
                            })
                        
                }else {
                    reactiveResictance.push({...dataInput[arrayOfKeys[i]]})            

                }
            
        }
            return reactiveResictance
            
}
            let outputOfReactiveResiters= reactiveResist(dataInput)
        
        function fullResistenceOfBranch(dataWithReactiveResictence){
                let putchedBranchesResist=[];
                
                
                for (let i = 0; i < dataWithReactiveResictence.length; i++) {
        
                let currentFullResistence=Complex(0,0);  
                    
                dataWithReactiveResictence[i].hasOwnProperty('reactiveResistenceOfCondense') ? currentFullResistence=currentFullResistence.add(0,dataWithReactiveResictence[i].reactiveResistenceOfCondense):''


                dataWithReactiveResictence[i].hasOwnProperty('reactiveResistenceOfCoil') ? currentFullResistence=currentFullResistence.add(0,dataWithReactiveResictence[i].reactiveResistenceOfCoil):''

                dataWithReactiveResictence[i].hasOwnProperty('resistance') ? currentFullResistence=currentFullResistence.add(dataWithReactiveResictence[i].resistance,0):''

                putchedBranchesResist.push(
                                {...dataWithReactiveResictence[i],
                                    fullResistenceOfBranch:currentFullResistence
                                }
                )
                        
                    
                }
                
                
                return putchedBranchesResist
        }
        let putchedBranchedsResictence=fullResistenceOfBranch(outputOfReactiveResiters);

        function resictenceOfChain(fullResistenceOfBranch){
            
            let arrayOfParralel=[];
            let sumOfStraight=Complex(0,0);
            let sumOfParralel=Complex(0,0);
            
            for (let i = 0; i < fullResistenceOfBranch.length; i++) {
                 fullResistenceOfBranch[i].fullResistenceOfBranch
                 

                if(fullResistenceOfBranch[i].isStraight){
                    sumOfStraight=sumOfStraight.add(fullResistenceOfBranch[i].fullResistenceOfBranch)
                    console.log(sumOfStraight)
                 }else{
                    arrayOfParralel.push(fullResistenceOfBranch[i].fullResistenceOfBranch)
                 }
                
            }
            if(arrayOfParralel.length==2){
                sumOfParralel=(Complex(arrayOfParralel[0]).mul(arrayOfParralel[1])).div(Complex(arrayOfParralel[0]).add(arrayOfParralel[1]))
                
                
            }else{

            }
            
            return sumOfStraight.add(sumOfParralel)
        }
        resictenceOfChain(putchedBranchedsResictence)
        

        function fullVoltage(startVoltage,angle){
            console.log(startVoltage , angle)
            console.log(startVoltage/Math.sqrt(2)+'e^'+angle)
            let hipotinize=Math.asin(angle/57.29)
            let bSide=startVoltage*Math.cos(angle/57.29)
            let aSide=startVoltage*Math.sin(angle/57.29)
            console.log(Math.cos(angle/57.29))
            console.log(Math.sin(angle/57.29))
            console.log(aSide)
            console.log(bSide)


        }
        fullVoltage(12.9,94.8)

/*
        function putchToSignFormula(signPutcher){
            
            let forAsinFunc=signPutcher['im']/(Math.sqrt(signPutcher['re']**2+signPutcher['im']**2))
        console.log(Math.asin(forAsinFunc)*57.29)
        }
        
        putchToSignFormula(Complex(6.76,1.56))

        */
        
    </script>
</body>
</html>